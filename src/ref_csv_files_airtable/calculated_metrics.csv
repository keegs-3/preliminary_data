metric_name,display_name,description,calculation_formula,source_metrics,calculation_type,output_unit,calculation_frequency,validation_rules,error_handling,implementation_notes,record_id
eating_window_duration,Eating Window Duration,"The total duration of the daily eating window, calculated from first meal time to last meal time",last_meal_time - first_meal_time,"last_meal_time,first_meal_time",temporal,hour,daily,"Result should be between 4-18 hours. If > 18 hours, flag as potential data error.","If first_meal_time or last_meal_time is missing, return null and log warning",Consider timezone handling for cross-midnight eating windows,recJQEe4cTvay0i4O
protein_per_kg,Protein per Kilogram Body Weight,Daily protein intake normalized by body weight in kg,total_daily_protein_g / body_weight_kg,"dietary_protein_grams,body_weight",mathematical,grams_per_kg,daily,Result should be between 0.5-3.0 g/kg. Values outside this range should be flagged.,"If body_weight_kg is 0 or missing, use most recent valid weight. If protein data missing, return null.",Use most recent body weight within 30 days. Consider using lean body mass for athletes.,recBWFb2QzY1mA9fF
sleep_duration,Sleep Duration,"Total sleep time calculated from sleep onset to wake time, excluding wake periods",abs(wake_time - sleep_time),"wake_time,sleep_time",temporal,time_hours_minutes,daily,Result should be between 3-12 hours. Flag values outside this range for review.,"If sleep_onset_time or wake_time missing, attempt to derive from device data. Return null if insufficient data.",Integrate with wearable device data for automatic detection. Handle daylight saving time transitions.,rec6kdByxTOnrH0ig
sleep_time_consistency,Sleep Time Consistency,Measures consistency of sleep and wake times over a rolling 7-day period,STDEV(sleep_times_over_analysis_period_in_minutes),sleep_time,statistical,time_minutes,daily,Result should be between 0-100%. Higher values indicate better consistency.,Require minimum 5 days of data in 7-day window. Return null if insufficient data.,Use standard deviation of sleep/wake times. Weight recent days more heavily.,recBPqPCjveQ7fY0u
wake_time_consistency,Wake Time Consistency,Measures the consistency of wake times over a rolling 7-day period using standard deviation. Lower deviation indicates better sleep schedule consistency.,STDEV(wake_times_over_analysis_period_in_minutes),wake_time,statistical,time_minutes,daily,Result should be between 0-100%. Values < 20% indicate very inconsistent wake times. Values > 80% indicate good consistency.,"Require minimum 5 days of data in 7-day window. If insufficient data, return null and log warning. Handle timezone changes appropriately.",Use time-only comparison (ignore date). Consider weekday vs weekend patterns. Use 60-minute max acceptable deviation as baseline.,recTJ5s479JqYJBmZ
saturated_fat_percentage,Saturated Fat Percentage,Calculates the percentage of daily calories that come from saturated fat. Used to monitor compliance with dietary guidelines recommending <10% of calories from saturated fat.,(saturated_fat_grams * 9) / total_daily_calories * 100,"dietary_saturated_fat_grams,calories",mathematical,percent,daily,Result should be between 0-50%. Values > 20% should be flagged as potentially concerning. Values > 30% require review.,"If total_daily_calories is 0 or missing, return null. If saturated_fat_grams is missing, treat as 0 and log warning.",Use 9 calories per gram of fat conversion factor. Consider using net calories (exclude alcohol) for more accurate percentage. Round to 1 decimal place.,rec54QRaOBrcrswr5
