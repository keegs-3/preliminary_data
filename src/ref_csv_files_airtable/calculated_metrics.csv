metric_name,display_name,description,calculation_formula,source_metrics,calculation_type,output_unit,calculation_frequency,validation_rules,error_handling,implementation_notes,record_id,
user_age,User Age,User's age for determining applicable screening requirements and intervals.,"DATEDIF(birth_date, TODAY(), ""YEARS"")",,,temporal,years,daily,Result should be between 0-120 years. Values outside this range should be flagged.,"If no birth date provided, return null. Calculate from birth_date to current date.",Calculated from user's birth_date. Used by all screening compliance calculations to determine applicable rules.,reccxjOOMyTQZbO2d
bmi_calculated,BMI (Calculated),Body Mass Index calculated from weight and height measurements. Used to assess weight status and health risk.,body_weight_kg / (height_meters^2),"body_weight, height",,mathematical,kilograms_per_square_meter,on_demand,Result should be between 10-60 kg/m². Values < 16 or > 40 should be flagged for review.,"If body_weight or height is missing, return null. If either value is zero or invalid, return null.",Requires both body_weight and height metrics. Height should be converted to meters if stored in other units.,recD37fkwARyAZlHy
eating_window_duration,Eating Window Duration,"The total duration of the daily eating window, calculated from first meal time to last meal time",last_meal_time - first_meal_time,"last_meal_time, first_meal_time",,temporal,hours,daily,"Result should be between 4-18 hours. If > 18 hours, flag as potential data error.","If first_meal_time or last_meal_time is missing, return null and log warning",Consider timezone handling for cross-midnight eating windows,recJQEe4cTvay0i4O
protein_per_kg,Protein per Kilogram Body Weight,Daily protein intake normalized by body weight in kg,total_daily_protein_g / body_weight_kg,"dietary_protein_grams, body_weight",,mathematical,grams_per_kg,daily,Result should be between 0.5-3.0 g/kg. Values outside this range should be flagged.,"If body_weight_kg is 0 or missing, use most recent valid weight. If protein data missing, return null.",Use most recent body weight within 30 days. Consider using lean body mass for athletes.,recBWFb2QzY1mA9fF
sleep_duration,Sleep Duration,"Total sleep time calculated from sleep onset to wake time, excluding wake periods",abs(wake_time - sleep_time),"wake_time, sleep_time",,temporal,hours_minutes,daily,Result should be between 3-12 hours. Flag values outside this range for review.,"If sleep_onset_time or wake_time missing, attempt to derive from device data. Return null if insufficient data.",Integrate with wearable device data for automatic detection. Handle daylight saving time transitions.,rec6kdByxTOnrH0ig
sleep_time_consistency,Sleep Time Consistency,Standard deviation of sleep times over analysis period. Lower values indicate better sleep schedule consistency.,STDEV(sleep_times_over_analysis_period_in_minutes),sleep_time,,statistical,minutes,daily,Result should be 0-180 minutes. Values < 15 indicate very consistent sleep times. Values > 60 indicate poor consistency.,Require minimum 5 days of data in 7-day window. Return null if insufficient data.,"Convert sleep times to minutes from midnight (e.g., 10:30 PM = 1350 minutes). Lower standard deviation = better consistency. Analysis period configurable (7, 30, 90 days).",recBPqPCjveQ7fY0u
wake_time_consistency,Wake Time Consistency,Standard deviation of wake times over analysis period. Lower values indicate better wake schedule consistency.,STDEV(wake_times_over_analysis_period_in_minutes),wake_time,,statistical,minutes,daily,Result should be 0-180 minutes. Values < 15 indicate very consistent wake times. Values > 60 indicate poor consistency.,"Require minimum 5 days of data in 7-day window. If insufficient data, return null and log warning. Handle timezone changes appropriately.","Convert wake times to minutes from midnight (e.g., 7:30 AM = 450 minutes). Lower standard deviation = better consistency. Analysis period configurable (7, 30, 90 days).",recTJ5s479JqYJBmZ
saturated_fat_percentage,Saturated Fat Percentage,Calculates the percentage of daily calories that come from saturated fat. Used to monitor compliance with dietary guidelines recommending <10% of calories from saturated fat.,(saturated_fat_grams * 9) / total_daily_calories * 100,"dietary_saturated_fat_grams, calories",,mathematical,percent,daily,Result should be between 0-50%. Values > 20% should be flagged as potentially concerning. Values > 30% require review.,"If total_daily_calories is 0 or missing, return null. If saturated_fat_grams is missing, treat as 0 and log warning.",Use 9 calories per gram of fat conversion factor. Consider using net calories (exclude alcohol) for more accurate percentage. Round to 1 decimal place.,rec54QRaOBrcrswr5
first_meal_delay,First Meal Delay,Time elapsed between waking up and consuming the first meal of the day. Important for intermittent fasting protocols and circadian rhythm alignment.,first_meal_time - wake_time,"wake_time, first_meal_time",,temporal,hours_minutes,daily,Result should be between 0-12 hours. Negative values indicate data error (meal before wake time). Values > 8 hours may indicate extended fasting.,"If wake_time or first_meal_time is missing, return null. If first_meal_time < wake_time, flag as data error and return null.",Handle cross-midnight scenarios carefully. Consider timezone consistency. Round to nearest 0.1 hour (6 minutes) for practical precision.,recMpCZo09WgAfk2c
last_meal_buffer,Last Meal Buffer,"Time elapsed between the last meal of the day and sleep onset. Important for digestive health, sleep quality, and metabolic optimization.",sleep_time - last_meal_time,"sleep_time, last_meal_time",,temporal,hours_minutes,daily,Result should be between 0-8 hours. Negative values indicate eating after sleep onset (data error). Values < 1 hour may impact sleep quality.,"If sleep_time or last_meal_time is missing, return null. If last_meal_time > sleep_time, flag as data error and return null.","Handle cross-midnight scenarios (late dinners, early sleep). Consider timezone consistency. Round to nearest 0.1 hour for practical precision.",rec8nEKVFML8KwWlz
months_since_mammogram,Months Since Last Mammogram,Days since last mammogram screening. Calculated from most recent mammogram date to current date. Used to determine screening compliance.,"Calculate months, days between most_recent_mammogram_date and TODAY()",mammogram_date,,temporal,months_days,daily,Result should be < 12 months. Values > 12 months 0 days indicate overdue screening.,"If no mammogram date found, return null. If multiple dates exist, use most recent.",Source from mammogram_screening date entries. Consider different screening intervals by age/risk.,recreMXLzHVtBTpLQ
years_since_colonoscopy,Years Since Last Colonoscopy,Days since last colonoscopy screening. Calculated from most recent colonoscopy date to current date. Used to determine screening compliance.,"Calculate years, months, days between most_recent_colonoscopy_date and TODAY()",colonoscopy_date,,temporal,years_months_days,daily,Result should be < 10 years. Values > 10 years 0 months indicate overdue screening.,"If no colonoscopy date found, return null. If multiple dates exist, use most recent.","Source from colonoscopy_screening date entries. Standard interval is 10 years, 5 years for high risk.",recJC4Ckfp5tc0NsZ
months_since_skin_check,Months Since Last Skin Check,Days since last skin check screening. Calculated from most recent dermatology exam date to current date. Used to determine screening compliance.,"Calculate months, days between most_recent_skin_check_date and TODAY()",skin_check_date,,temporal,months_days,daily,Result should be < 12 months. Values > 12 months 0 days indicate overdue screening.,"If no skin check date found, return null. If multiple dates exist, use most recent.",Source from skin_check_screening date entries. Consider more frequent checks for high-risk patients.,recMOnDdjygrejKCP
months_since_vision_check,Months Since Last Vision Check,Days since last comprehensive eye exam. Calculated from most recent vision check date to current date. Used to determine screening compliance.,"Calculate months, days between most_recent_vision_check_date and TODAY()",vision_check_date,,temporal,months_days,daily,Result should be < 12 months. Values > 12 months 0 days indicate overdue screening.,"If no vision check date found, return null. If multiple dates exist, use most recent.",Source from vision_check_screening date entries. Annual exams recommended for most adults.,recu6YlrOHZBSslIB
months_since_dental_exam,Months Since Last Dental Exam,Days since last dental cleaning/exam. Calculated from most recent dental visit date to current date. Used to determine screening compliance.,"Calculate months, days between most_recent_dental_exam_date and TODAY()",dental_screening_date,,temporal,months_days,daily,Result should be < 6 months. Values > 6 months 0 days indicate overdue screening.,"If no dental exam date found, return null. If multiple dates exist, use most recent.",Source from dental_screening date entries. Bi-annual cleanings (every 6 months) recommended.,rec5knpmeeLhVquE2
years_since_physical,Years Since Last Physical,Days since last annual physical examination. Calculated from most recent physical exam date to current date. Used to determine screening compliance.,"Calculate years, months, days between most_recent_physical_date and TODAY()",physical_exam_date,,temporal,years_months_days,daily,Result should be < 1 year. Values > 1 year 0 months indicate overdue screening.,"If no physical exam date found, return null. If multiple dates exist, use most recent.",Source from physical_exam date entries. Annual physicals recommended for adults.,reccPozazZWpyhPqM
years_since_psa_test,Years Since Last PSA Test,Days since last PSA test screening. Calculated from most recent PSA test date to current date. Used to determine screening compliance.,"Calculate years, months, days between most_recent_psa_test_date and TODAY()",psa_date,,temporal,years_months_days,daily,Result should be < 3 years. Values > 3 years 0 months indicate overdue screening.,"If no PSA test date found, return null. If multiple dates exist, use most recent.",Source from PSA test date entries. Testing interval varies by age and risk (1-3 years).,reckgzrjimxYZxpt0
years_since_cervical_screening,Years Since Last Cervical Screening,Days since last cervical cancer screening (HPV or Pap test). Calculated from most recent screening date to current date. Used to determine screening compliance.,"Calculate years, months, days between most_recent_cervical_screening_date and TODAY()",hpv_pap_date,,temporal,years_months_days,daily,Result should be < 5 years. Values > 3 years 0 months indicate overdue screening.,"If no cervical screening date found, return null. If multiple dates exist, use most recent.","Source from HPV/Pap test date entries. Interval depends on test type: Pap every 3 years, HPV every 5 years.",recCqWpHvLM548nuG
screening_compliance_score,Preventive Care Compliance Score,Overall preventive care compliance score based on all due screenings. Calculated from individual screening status and due dates.,FOR each applicable screening in screening_compliance_rules: score = compliance_status_to_points(status); RETURN weighted_average(all_scores),,,statistical,percent,daily,Result should be 0-100%. Higher scores indicate better compliance with preventive care.,"If no user demographics available, return null. If no applicable screenings, return 100 (no requirements).","Scoring: compliant=100, due_soon=75, overdue=0, not_applicable=excluded. Weight by screening importance/frequency. Uses user's age, gender, risk factors to determine applicable screenings.",recSwhsh7l77SgGTm
mammogram_compliance_status,Mammogram Compliance Status,"Compliance status for mammogram screening based on user's age, risk factors, and last screening date. Returns compliant, due_soon, overdue, or not_applicable.","IF(gender=female AND age>21, calculate_compliance(last_mammogram_date, age, risk_level, mammogram_rules), not_applicable)",mammogram_date,"mammogram_male_female_under_50_average, mammogram_male_female_over_50_average, mammogram_male_female_under_50_high",conditional,categorical,daily,"Result should be one of: compliant, due_soon, overdue, not_applicable","If no age/gender data, return not_applicable. If no screening date, return overdue if applicable.",Uses screening_compliance_rules table to determine applicable interval based on age/risk. Due_soon = within 2 months of due date.,recWqK9lz8bVtDxZ6
colonoscopy_compliance_status,Colonoscopy Compliance Status,"Compliance status for colonoscopy screening based on user's age, risk factors, and last screening date. Returns compliant, due_soon, overdue, or not_applicable.","IF(age>=50, calculate_compliance(last_colonoscopy_date, age, risk_level, colonoscopy_rules), not_applicable)",colonoscopy_date,"colonoscopy_male_female_over_50_average, colonoscopy_male_female_over_50_high",conditional,categorical,daily,"Result should be one of: compliant, due_soon, overdue, not_applicable","If no age data, return not_applicable. If no screening date and age>50, return overdue.","Uses screening_compliance_rules: 10yr interval for average risk, 5yr for high risk. Due_soon = within 12 months of due date.",recm8vh6IPW4vTEWl
dental_compliance_status,Dental Compliance Status,"Compliance status for dental exam based on last cleaning date. Returns compliant, due_soon, overdue.","calculate_compliance(last_dental_date, 6_month_interval)",dental_screening_date,dental_male_female_all_ages_average,conditional,categorical,daily,"Result should be one of: compliant, due_soon, overdue","If no dental exam date, return overdue (universal recommendation).",Universal 6-month interval for all adults. Due_soon = within 1 month of due date.,recc7lkQ07VEDDAZc
physical_compliance_status,Physical Exam Compliance Status,"Compliance status for annual physical exam based on last exam date. Returns compliant, due_soon, overdue.","calculate_compliance(last_physical_date, 12_month_interval)",physical_exam_date,physical_male_female_all_ages_average,conditional,categorical,daily,"Result should be one of: compliant, due_soon, overdue","If no physical exam date, return overdue (universal recommendation).",Universal 12-month interval for all adults. Due_soon = within 2 months of due date.,recDT4FlMS1WOkBTH
skin_check_compliance_status,Skin Check Compliance Status,"Compliance status for skin check based on user's risk factors and last screening date. Returns compliant, due_soon, overdue, or not_applicable.","calculate_compliance(last_skin_check_date, risk_level, skin_check_rules)",skin_check_date,"skin_check_male_female_all_ages_average, skin_check_male_female_all_ages_high",conditional,categorical,daily,"Result should be one of: compliant, due_soon, overdue, not_applicable","If no risk assessment, assume average risk (12-month interval).","12-month interval for average risk, 6-month for high risk. Due_soon = within 2 months of due date.",recdXPDQnkAt83XOz
vision_check_compliance_status,Vision Check Compliance Status,"Compliance status for vision check based on last eye exam date. Returns compliant, due_soon, overdue.","calculate_compliance(last_vision_check_date, 12_month_interval)",vision_check_date,vision_check_male_female_all_ages_average,conditional,categorical,daily,"Result should be one of: compliant, due_soon, overdue","If no vision check date, return overdue (universal recommendation).",Universal 12-month interval for adults. Due_soon = within 2 months of due date.,recydwP7T0HYIjE3m
psa_compliance_status,PSA Test Compliance Status,"Compliance status for PSA test based on user's age, risk factors, and last test date. Returns compliant, due_soon, overdue, or not_applicable.","IF(gender=male AND age>=45, calculate_compliance(last_psa_date, age, risk_level, psa_rules), not_applicable)",psa_date,"psa_male_50_to_70_average, psa_male_45_to_70_high",conditional,categorical,daily,"Result should be one of: compliant, due_soon, overdue, not_applicable","If no age/gender data, return not_applicable. If male and age 50-70, assume average risk if not specified.","3-year interval for average risk, 1-year for high risk. Age 45-70 for high risk, 50-70 for average. Due_soon = within 6 months of due date.",rechGTm6YW1SekAvA
cervical_compliance_status,Cervical Screening Compliance Status,"Compliance status for cervical cancer screening (Pap/HPV tests) based on user's age and last screening date. Returns compliant, due_soon, overdue, or not_applicable.","IF(gender=female AND age>=21 AND age<=65, calculate_compliance(last_cervical_date, cervical_rules), not_applicable)",hpv_pap_date,"cervical_hpv_female_21_to_65_average, cervical_pap_female_21_to_65_average",conditional,categorical,daily,"Result should be one of: compliant, due_soon, overdue, not_applicable","If no age/gender data, return not_applicable. If female age 21-65, return overdue if no screening date.",HPV test every 5 years OR Pap test every 3 years for ages 21-65. Due_soon = within 6 months of due date. Uses most recent of either test type.,recNmAAClY6S4pM39
